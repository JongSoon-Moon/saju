# 🔮 사주분석 앱 기능명세서 (SPEC)

**프로젝트명**: 사주분석 앱  
**버전**: v1.0.0  
**작성일**: 2026년 2월 13일  

---

## 📌 프로젝트 개요

### 목적
생년월일을 입력하여 동양 전통 사주 분석을 수행하는 웹 애플리케이션입니다. 사용자에게 천간지지, 오행, 동물띠 등 사주의 기본 요소를 분석하고 설명하여 자신의 운명과 성향을 이해할 수 있도록 돕습니다.

### 대상 사용자
- 사주에 관심 있는 일반인
- 자신의 성향과 운세에 대해 궁금한 사람
- 동양 철학과 운명학을 배우고 싶은 사람

### 주요 특징
- ✅ **직관적인 UI**: Streamlit을 사용한 쉬운 인터페이스
- ✅ **정확한 계산**: 천간지지 자동 계산 알고리즘
- ✅ **시각화**: 그래프를 이용한 오행 분석 표시
- ✅ **교육적 내용**: 사주 기본 개념 설명 및 용어 해설

---

## 🎯 주요 기능 목록

### 1. **사주 분석 (Main Feature)**

#### 화면 설명
- **탭명**: "📅 사주 분석"
- **위치**: 첫 번째 탭 (활성화됨)
- **목적**: 사용자 생년월일 입력 및 사주 분석 수행

#### 세부 기능

**1-1. 생년월일 입력**
- **구성**: 
  - 년도: 1900 ~ 2100년 범위의 숫자 입력 (기본값: 2000)
  - 월: 1 ~ 12 범위의 숫자 입력 (기본값: 1)
  - 일: 1 ~ 31 범위의 숫자 입력 (기본값: 1)
- **유효성 검증**:
  - 유효한 날짜 여부 확인 (예: 2월 30일은 불가)
  - 월과 일의 범위 체크

**1-2. 달력 유형 선택**
- **옵션**: 양력 / 음력
- **기본값**: 양력
- **목적**: 양력과 음력 구분 (향후 실제 변환 기능 추가 예정)

**1-3. 출생 시간 입력 (선택사항)**
- **범위**: 0 ~ 23시간 (슬라이더)
- **기본값**: 12시 (정오)
- **설명**: 현재 버전에서는 간단한 시정(時正) 계산에만 사용

**1-4. 사주 분석 버튼**
- **텍스트**: "🔍 사주 분석하기"
- **타입**: Primary (주요 버튼)
- **동작**: 클릭 시 분석 수행, 결과 표시

#### 분석 결과 화면

**1-5. 천간지지 표시**
- **형식**: 4개의 메트릭으로 표시
  - 年(년): 예) 甲子
  - 月(월): 예) 乙丑
  - 日(일): 예) 丙寅
  - 時(시): 예) 丁卯

**1-6. 동물띠 표시**
- **형식**: 🐶 **동물띠**: [띠 이름]
- **예시**: 🐶 **동물띠**: 쥐띠

**1-7. 오행 분석**
- **표시 방식**:
  - 막대 그래프로 5가지 오행(木火土金水)의 강도 표시
  - 숫자로 각 오행의 개수 표시
- **오행별 설명**:
  - 각 오행의 색, 방향, 계절, 맛 정보 제시
  - 시각적으로 다른 색상의 박스로 구분

**1-8. 천간과 지지의 의미**
- **년주 상세 설명**:
  - 천간(예: 甲)의 의미
  - 지지(예: 子)의 의미
- **박스 형식**: 강조된 스타일의 컨테이너로 표시

**1-9. 운세 해석**
- **형식**: 정보 박스(Info)로 표시
- **내용**:
  - 기본 성질 설명 (천간 기준)
  - 오행 정보
  - 일반적인 운세 조언
  - 자기계발 메시지

**1-10. 사주도 표시**
- **형식**: 테이블로 표시
- **열**: 구분, 천간, 지지
- **행**: 年, 月, 日, 時 (4행)

#### 에러 처리
- **유효하지 않은 날짜 입력**: 
  - 메시지: "❌ 잘못된 날짜입니다. 다시 확인해주세요."
  - 색상: 빨강 (에러 스타일)
- **기타 오류**:
  - 메시지: "❌ 오류 발생: [오류 내용]"

---

### 2. **사주 정보 페이지**

#### 화면 설명
- **탭명**: "ℹ️ 사주란?"
- **목적**: 사주의 정의 및 개념 설명

#### 세부 내용
- **사주의 정의**: 동양 전통 운명학 소개
- **四柱의 의미**: 
  - 년주(年柱)
  - 월주(月柱)
  - 일주(日柱)
  - 시주(時柱)
- **주요 개념 표**: 천간, 지지, 오행, 납음 정의
- **사주 분석의 의미**: 
  - 개인 성향 파악
  - 운의 흐름 이해
  - 자기계발 방향
  - 인간관계 분석
- **주의사항**: 사주의 올바른 이해와 내용 (절대성 아님, 본인 노력의 중요성 등)

---

### 3. **용어 설명 페이지**

#### 화면 설명
- **탭명**: "📚 용어 설명"
- **목적**: 사주 관련 용어에 대한 상세 설명

#### 세부 내용

**3-1. 천간(天干) 테이블**
- **열**: 天干, 음독, 양/음, 오행, 의미
- **행 수**: 10행 (甲부터 癸까지)

**3-2. 지지(地支) & 동물띠 테이블**
- **열**: 地支, 띠, 시간, 오행, 특징
- **행 수**: 12행 (子부터 亥까지)
- **추가 정보**: 각 지지별 정시(時刻) 범위 표시

**3-3. 오행(五行) 테이블**
- **열**: 오행, 색, 방위, 계절, 맛, 특징
- **행 수**: 5행 (木火土金水)

---

### 4. **설정 페이지**

#### 화면 설명
- **탭명**: "⚙️ 설정"
- **목적**: 앱 정보 및 사용 주의사항 제시

#### 세부 내용

**4-1. 버전 정보**
- **현재 버전**: v1.0.0
- **기본 기능 설명**

**4-2. 주요 기능 목록**
- ✅ 생년월일 입력
- ✅ 천간지지 계산
- ✅ 오행 분석
- ✅ 용어 설명
- ✅ 기본 운세 해석

**4-3. 주의사항**
1. 정확한 시간의 중요성
2. 음력/양력 확인 방법
3. 전문가 상담 권고

**4-4. 피드백 및 문의**
- GitHub Issues를 통한 제안 안내
- ⭐ 스타 요청

---

## 📊 사용자 입력 항목 및 유효성 검증

| 입력 항목 | 타입 | 범위 | 필수 | 유효성 검증 |
|----------|------|------|------|----------|
| 태어난 년도 | 숫자 | 1900 ~ 2100 | O | 범위 체크 |
| 태어난 월 | 숫자 | 1 ~ 12 | O | 범위 체크 |
| 태어난 일 | 숫자 | 1 ~ 31 | O | 유효 날짜 여부 확인 |
| 달력 유형 | 선택지 | 양력/음력 | O | 선택지 제한 |
| 출생 시간 | 슬라이더 | 0 ~ 23 | X | 범위 자동 제한 |

---

## 🔄 데이터 처리 방식

### 입력 데이터 흐름
```
사용자 입력 (년월일시)
    ↓
유효성 검증
    ↓
Python datetime 객체 생성
    ↓
사주 계산 함수 호출
    ↓
결과 데이터 생성
    ↓
UI에 결과 표시
```

### 사주 계산 알고리즘
1. **기준점**: 1900년 1월 1일 (甲子: 갑자년 갑자월 갑자일)
2. **년간지**: (year - 1900) % 60으로 계산
3. **월간지**: 년정보와 월을 기반으로 계산
4. **일간지**: 기준일로부터의 일수 차이 % 60
5. **시간지**: 사용자 입력 시간 기준 계산

### 오행 분석
- 천간별 오행 매핑: 
  ```python
  甲乙→木, 丙丁→火, 戊己→土, 庚辛→金, 壬癸→水
  ```
- 4주(년월일시)의 천간을 기준으로 오행 개수 집계

---

## ⚠️ 예외 처리 내용

### 에러 타입별 처리

| 에러 타입 | 발생 상황 | 처리 방법 | 메시지 |
|----------|----------|----------|-------|
| ValueError | 유효하지 않은 날짜 | try-except 캐치 | "❌ 잘못된 날짜입니다." |
| 기타 예외 | 예상 밖의 오류 | 일반 오류 처리 | "❌ 오류 발생: [내용]" |

### 유효성 검증 실패 처리
- 월: 1 ~ 12 범위 외 → Streamlit 자동 범위 제한
- 일: 유효하지 않은 일자 → ValueError 발생 후 에러 메시지 표시

---

## 🖥️ 배포 환경 요구사항

### 최소 사양

| 항목 | 요구사항 |
|------|--------|
| **Python 버전** | 3.11.x 또는 3.12.x |
| **Streamlit** | 1.54.0 이상 |
| **pandas** | 2.3.3 이상 |
| **numpy** | 2.4.2 이상 |

### 필수 패키지

```
streamlit==1.54.0
pandas==2.3.3
numpy==2.4.2
python-dateutil==2.9.0
pytz==2025.2
```

### 배포 플랫폼
- **Streamlit Community Cloud** (권장)
- **AWS**, **Google Cloud** (Docker 컨테이너)
- **Heroku** (buildpack 사용)

### 환경 변수
- 현재 버전에서는 환경 변수 불필요
- 향후 API 연동 시 `.streamlit/secrets.toml` 사용

---

## 📸 UI/UX 상세

### 색상 스키마
- **메인 색**: #8B4513 (갈색 - 동양 신비로운 느낌)
- **강조색**: #4169E1 (파란색 - 정보 박스)
- **배경색**: #FFF8DC, #FFE4B5 (따뜻한 베이지)

### 레이아웃
- **페이지 나비**: 4개 탭으로 구성
- **입력 영역**: 3개 열 (년, 월, 일)
- **결과 영역**: 그리드 레이아웃으로 정렬

### 접근성
- 모든 입력에 한글 라벨 제공
- 이모지를 통한 직관적 UI 표시
- 색상 외에도 텍스트로 정보 전달

---

## 🔒 보안 고려사항

### 민감정보 처리
- **입력 데이터**: 생년월일, 시간 (PII에 해당)
- **저장 방식**: 메모리에만 저장 (영구 저장 안 함)
- **전송 방식**: HTTPS (Streamlit 기본)
- **개인정보정책**: 미수집, 개인정보 보호

### .env 파일 관리
- 현재 버전: API 키 없음
- 향후 API 추가 시 `.env` 파일로 분리
- `.gitignore`에 `.env` 포함

---

## 📝 개발 일지

| 날짜 | 내용 | 상태 |
|------|------|------|
| 2026-02-13 | 프로젝트 초기화, 기본 UI 구성 | ✅ 완료 |
| 2026-02-13 | 사주 계산 알고리즘 구현 | ✅ 완료 |
| 2026-02-13 | 모든 탭 구현 및 테스트 | ✅ 완료 |

---

## 📸 스크린샷 계획

향후 추가될 스크린샷 위치:

```
/docs/screenshots/
├── 1-main-analysis.png       # 사주 분석 결과
├── 2-saju-info.png           # 사주 정보 페이지
├── 3-terminology.png         # 용어 설명 페이지
├── 4-settings.png            # 설정 페이지
└── 5-error-handling.png      # 에러 처리 화면
```

---

## 🚀 향후 계획

향후 개선될 주요 기능은 [UNIMPLEMENT.md](UNIMPLEMENT.md)를 참조하세요.

---

**최종 검토**: 2026년 2월 13일  
**작성자**: AI Assistant  
**버전**: v1.0.0 SPEC
