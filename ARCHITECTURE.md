# 🔮 사주명리 분석 소프트웨어 — 전체 기획서

**문서 버전**: v2.0.0  
**작성일**: 2026-02-13  
**목적**: 사주분석 프로그램의 전체 분석 모듈 정의, 데이터 모델, MVP 로드맵, UI 설계  

---

## 목차
1. [기능 모듈 목록](#1-기능-모듈-목록)
2. [데이터 모델](#2-데이터-모델)
3. [MVP 우선순위 & 로드맵](#3-mvp-우선순위--로드맵)
4. [UI/리포트 설계](#4-ui리포트-설계)
5. [면책/윤리 문구](#5-면책윤리-문구)

---

# 1. 기능 모듈 목록

## A. 기본 산출 (Foundation)

| ID | 모듈명 | 목적 | 입력 | 핵심 규칙(요약) | 출력(데이터 구조) | 사용자 예시 문구 | 난이도 |
|----|--------|------|------|----------------|-------------------|----------------|--------|
| A-01 | **사주 원국 산출** | 년·월·일·시 네 기둥의 천간·지지 계산 | `BirthInput` (양/음력, 시간, 성별) | 만세력 테이블 기반 간지 매핑. 절기 기준 월주 결정(입춘·경칩 등). 일주는 일진표 조회. 시주는 일간×시간 교차표 | `Pillars { year, month, day, hour }` 각각 `{ stem, branch }` | "귀하의 사주 원국은 **甲子년 乙丑월 丙寅일 丁卯시**입니다." | **MVP** |
| A-02 | **오행 분포 분석** | 목·화·토·금·수 비율 산출 | `Pillars` | 8글자(천간4+지지4) 각각의 오행 매핑 → 개수/비율 계산. 지장간 포함 시 가중치 적용(본기 1.0, 중기 0.7, 여기 0.3) | `ElementStats { wood, fire, earth, metal, water }` (정수 + 비율) | "오행 분포: 木 3(37%) · 火 2(25%) · 土 1(12.5%) · 金 1(12.5%) · 水 1(12.5%) — **木이 과다하고 土·金·水가 부족**합니다." | **MVP** |
| A-03 | **음양 균형** | 양(陽)·음(陰) 비율 산출 | `Pillars` | 천간: 甲丙戊庚壬=양, 乙丁己辛癸=음. 지지: 子寅辰午申戌=양, 丑卯巳未酉亥=음 | `YinYangStats { yang, yin, ratio }` | "음양 비율: 양 5 : 음 3 — **양의 기운이 강해** 적극적·외향적 성향이 두드러집니다." | **MVP** |
| A-04 | **십신(十神) 배치** | 일간 기준 나머지 7글자의 십신 관계 도출 | `Pillars` (일간 = 기준점) | 일간 vs 나머지 천간·지지의 오행 관계 → 비겁/식상/재성/관성/인성 × 정/편 = 10종 매핑 | `TenGodStats { positions: { pillar, position, tenGod }[] }` | "일간 丙火 기준: 년간 甲木은 **편인**, 월간 乙木은 **정인**, 시지 卯木은 **정인** — 인성이 두터워 학문·사고력이 뛰어납니다." | **MVP** |
| A-05 | **지장간(藏干) 분석** | 지지 속 숨은 천간(본기·중기·여기) 추출 | `Pillars.branches[]` | 12지지별 지장간 테이블 조회. 예: 寅 → 본기 甲, 중기 丙, 여기 戊 | `HiddenStems { branch, main, middle?,余? }[]` | "일지 寅 속에는 甲木(본기)·丙火(중기)·戊土(여기)가 숨어 있어, 표면 아래 다양한 에너지가 공존합니다." | **MVP** |
| A-06 | **12운성(十二運星)** | 일간이 각 지지에서의 생왕사절 단계 판별 | `Pillars.dayStem`, `Pillars.branches[]` | 일간별 12운성 순환표(장생·목욕·관대·건록·제왕·쇠·병·사·묘·절·태·양). 양간 순행, 음간 역행 | `TwelveStages { pillar, stage, stageKor }[]` | "일간 丙火가 일지 寅에서 **장생**(長生) — 에너지가 싹트는 시기로, 새로운 시작에 강합니다." | **MVP** |
| A-07 | **신살(神煞) 판별** | 길신·흉살 목록 추출 | `Pillars` | 약 40~80종 신살 규칙표. 범주: ① 귀인계(천을귀인, 천덕귀인, 월덕귀인, 문창귀인 등) ② 도화계(도화살, 홍염살, 원진살) ③ 역마계(역마살, 화개살) ④ 충·형계(양인살, 괴강살) ⑤ 기타(공망, 백호살, 천라지망) | `SpecialStars { star, type, source, target, isPositive, description }[]` | "**천을귀인**이 월지에 있어 어려운 순간마다 도움이 등장하는 구조입니다. 다만 **도화살**이 일지에 함께하여 이성 관계에서 세심한 주의가 필요합니다." | **Adv** |
| A-08 | **천간 합·충** | 천간 간 합(甲己합 등)·충(甲庚충 등) 판별 | `Pillars.stems[]` | 합: 甲己土, 乙庚金, 丙辛水, 丁壬木, 戊癸火. 충: 같은 오행 양·양 / 음·음 충돌(甲庚, 乙辛 등) | `StemInteraction { type, stem1, stem2, result }[]` | "년간 甲과 일간 己가 **甲己合土**를 이루어, 안정과 신뢰를 중시하는 성품이 형성됩니다." | **MVP** |
| A-09 | **지지 충·합·형·파·해** | 지지 간 상호작용 모두 판별 | `Pillars.branches[]` | 6충(子午, 丑未 등), 6합(子丑, 寅亥 등), 3합(申子辰 등), 방합(寅卯辰 등), 3형(寅巳申 등), 6파, 6해 규칙표 전부 조회 | `BranchInteraction { type, branches[], result, effect }[]` | "월지 午와 일지 子가 **자오충**(子午沖)을 형성합니다 — 내면의 갈등, 환경 변화가 잦을 수 있으며 전환의 에너지가 강합니다." | **MVP** |

---

## B. 강약 / 용신 계열 (Strength & Optimization)

| ID | 모듈명 | 목적 | 입력 | 핵심 규칙(요약) | 출력 | 사용자 예시 문구 | 난이도 |
|----|--------|------|------|----------------|------|----------------|--------|
| B-01 | **신강·신약 판단** | 일간의 힘(득령·득지·득세·득시) 종합 점수화 | `Pillars`, `ElementStats`, `HiddenStems` | ① 득령: 월지가 일간을 생·비하면 +30 ② 득지: 일지·시지 생·비 여부 +15 each ③ 득세: 천간 생·비 +10 each ④ 지장간 가중치 합산 → 총점 50 이상이면 신강, 미만이면 신약 (경계: 종격 체크) | `StrengthResult { score, isStrong, factors[], grade }` | "일간 丙火의 힘 점수: **62점 (신강)**. 월지 午火에서 힘을 얻고(득령 +30), 년간 甲木의 도움(득세 +10)이 있습니다." | **MVP** |
| B-02 | **용신·희신·기신 추정** | 사주 균형을 맞추는 최적 오행 제시 | `StrengthResult`, `ElementStats`, `Pillars` | 신강 → 일간을 설기(食傷)·극(官)·소모(財)하는 오행이 용신. 신약 → 일간을 생(印)·비(比)하는 오행이 용신. 조후 보정: 여름생 水 필요, 겨울생 火 필요 | `UsefulGods { yongShin, huiShin, giShin, reasons[] }` | "용신: **水** (과다한 火를 식혀 균형), 희신: **金** (水를 생해주는 보조), 기신: **木** (火를 더 강화하므로 주의)" | **Adv** |
| B-03 | **격국(格局) 판별** | 사주의 전체 구조/패턴 분류 | `Pillars`, `TenGodStats` | 정격 8종(정관격, 편관격, 정인격, 편인격, 식신격, 상관격, 정재격, 편재격) + 외격(종격·종아격·종재격·종살격·건록격·양인격 등) 판별. 월지 지장간 본기의 십신 우선 | `Structure { type, name, description, isSpecial }` | "월지 본기에서 **정관격**이 성립합니다 — 조직 내 성취, 명예를 중시하는 구조로, 안정적 커리어에 유리합니다." | **Adv** |
| B-04 | **조후(調候) 분석** | 계절(월지)에 따른 온도·습도 보정 필요 오행 | `Pillars.monthBranch`, `Pillars.dayStem` | 일간×월지 조후표 조회. 예: 甲木 子月(겨울) → 조후용신 丙火(따뜻함 필요) | `ClimateAdj { needed, season, reason }` | "겨울(子月)에 태어난 甲木은 **丙火**(따뜻한 햇살)가 필수적입니다. 차가운 환경에서 성장하기 위해 열정과 따뜻함이 핵심 키워드입니다." | **Adv** |
| B-05 | **통관(通關) 분석** | 충돌하는 두 오행 사이를 중재하는 오행 탐색 | `ElementStats`, `BranchInteraction` | 상극 관계 오행이 모두 강할 때, 중간 오행(예: 金↔木 충돌 → 水가 통관)을 제시 | `Mediation { conflict, mediator, present, advice }` | "金과 木이 강하게 충돌합니다. 사이를 중재하는 **水**의 역할이 중요 — 유연한 소통, 감성적 접근이 갈등 해소의 열쇠입니다." | **Exp** |

---

## C. 대운 / 세운 (Luck Cycles)

| ID | 모듈명 | 목적 | 입력 | 핵심 규칙(요약) | 출력 | 사용자 예시 문구 | 난이도 |
|----|--------|------|------|----------------|------|----------------|--------|
| C-01 | **대운 산출** | 10년 주기 대운 간지와 시작 나이 계산 | `BirthInput`, `Pillars` | ① 양남음녀 → 순행, 음남양녀 → 역행 ② 생일~다음/이전 절기까지 일수 ÷ 3 = 대운 시작 나이 ③ 월주에서 순행/역행으로 간지 이동 | `LuckCycles { startAge, stem, branch, element, tenGod }[]` (8~10개) | "대운 흐름: 3세 丙寅(火) → 13세 丁卯(火) → 23세 戊辰(土) → 33세 己巳(火) → 43세 庚午(金) … 현재 33세, **己巳 대운** 중입니다." | **MVP** |
| C-02 | **세운(연운) 반영** | 매년의 간지가 원국·대운과 어떤 상호작용을 하는지 분석 | `Pillars`, `LuckCycles`, `targetYear` | 해당 연도 간지 산출 → 원국 8자 + 대운 2자와 충·합·형·파·해 검사 + 십신 관계 분석 | `AnnualLuck { year, stem, branch, events[], score, summary }` | "2026년 丙午년: 일간 甲木에게 丙은 **식신** — 창의력·표현력이 활발한 해. 단, 午火가 원국 子水와 **자오충**을 형성하여 감정적 변동에 주의." | **Adv** |
| C-03 | **월운 반영** | 월별 세밀한 운의 변화 추적 | `Pillars`, `LuckCycles`, `AnnualLuck`, `targetMonth` | 해당 월 간지 산출(절기 기준) → 원국·대운·세운과 교차 분석 | `MonthlyLuck { month, stem, branch, highlights[], score }` | "2026년 3월(辛卯월): 편재가 들어와 재물 관련 이벤트 가능성. 묘목이 원국 유금과 卯酉충 — 급격한 변화의 달." | **Adv** |
| C-04 | **변곡점 탐지** | 대운·세운에서 주요 충·합 발생 시점 자동 감지 | `LuckCycles`, 연도 범위 | 모든 대운×세운 조합에서 천간충/합, 지지충/형/합/파/해 검사 → 이벤트 밀도가 높은 연도를 "변곡점"으로 마킹 | `EventMarker { year, age, events[], severity, type }[]` | "⚡ **38세(2030년)**: 대운 庚과 세운이 원국과 다중 충돌 — 직업·거주지·관계에서 큰 전환이 예상되는 핵심 변곡점입니다." | **Adv** |
| C-05 | **대운 전환기 분석** | 대운이 바뀌는 시점의 에너지 변화 해석 | `LuckCycles`, 인접 대운 쌍 | 이전 대운 vs 다음 대운의 오행·십신 차이 분석 → 변화 강도 점수화 | `TransitionAnalysis { fromAge, toAge, changeScore, gains[], losses[] }` | "43세에 己巳→庚午 대운으로 전환: 土→金 에너지 변화. 관성(庚)이 새로 등장해 **직업/사회적 역할에 변화**가 생길 수 있습니다." | **Adv** |

---

## D. 주제별 해석 (Topic Reports)

| ID | 모듈명 | 목적 | 입력 | 핵심 규칙(요약) | 출력 | 사용자 예시 문구 | 난이도 |
|----|--------|------|------|----------------|------|----------------|--------|
| D-01 | **성격·기질 분석** | 일간+오행+십신 조합으로 성격 프로필 생성 | `Pillars`, `ElementStats`, `TenGodStats`, `StrengthResult` | ① 일간 오행별 기본 성격 템플릿 ② 신강/신약에 따른 성격 변형 ③ 지배적 십신에 따른 보정 (비겁 다수→독립적, 식상 다수→창의적 등) ④ 음양비율 반영 | `TopicReport { topic: "성격", score, summary, details[], advice }` | "**甲木 일간 + 신강**: 곧은 소나무처럼 의지가 굳고 리더십이 강합니다. 식상(丙火)이 두드러져 **표현력과 창의력**이 뛰어나지만, 때로 고집으로 비칠 수 있습니다." | **MVP** |
| D-02 | **학업·시험운** | 인성·식상·관성 분포로 학업 성향 판단 | `TenGodStats`, `LuckCycles`, `SpecialStars` | 인성 多 → 학습력 강, 식상 多 → 창의·예술, 관성 多 → 규율·자격증 유리. 문창귀인·화개살 보정. 대운/세운에서 인성·관성 시기 = 시험운 호기 | `TopicReport { topic: "학업" }` | "정인·편인이 3개로 **학습 흡수력이 매우 높습니다**. 특히 32~35세(인성 대운) 자격시험·진학에 유리합니다. 문창귀인이 시주에 있어 논문·저술에도 강점." | **Adv** |
| D-03 | **직업·커리어** | 격국+십신+용신으로 적합 직종 제안 | `Structure`, `TenGodStats`, `UsefulGods` | 격국별 직업 매핑표 + 용신 오행별 업종 매핑. 예: 정관격+金용신 → 법조/공무원/금융. 식신격+火용신 → 교육/요리/엔터 | `TopicReport { topic: "커리어", recommendations[] }` | "**정관격 + 용신 金**: 조직 내에서 빛나는 타입. 공직·법률·금융 분야에서 안정적 성취가 기대됩니다. 편재도 강해 부업·투자 감각도 있습니다." | **Adv** |
| D-04 | **재물·투자 성향** | 재성 분포, 대운 재성 시기 분석 | `TenGodStats`, `LuckCycles`, `UsefulGods` | 정재 多 → 안정 수입형, 편재 多 → 투기/사업형. 재성이 용신이면 재물복 큼. 대운에서 재성 오행 시기 = 재물 호기 | `TopicReport { topic: "재물", timeline[] }` | "편재가 2개로 **투자·사업 감각**이 있습니다. 다만 재성이 기신이라 과도한 투기는 위험. 43~52세(金 대운)에 재물운 상승 — 이 시기에 기반을 다지세요." | **Adv** |
| D-05 | **연애·결혼** | 재성(남)/관성(여)·도화·원진·합 분석 | `TenGodStats`, `SpecialStars`, `BranchInteraction` | 남: 정재=아내, 편재=연인. 여: 정관=남편, 편관=연인. 도화살+홍염살 → 이성 인기. 원진·충 → 갈등 요소. 합 다수 → 인연 많음 | `TopicReport { topic: "연애결혼", partnerProfile, timing[] }` | "정재가 월간에 투출되어 **결혼 인연이 분명**합니다. 도화살이 일지에 있어 이성에게 매력적이나, 원진살 주의. 배우자는 **土 기운이 강한** 안정적 성격일 가능성." | **Adv** |
| D-06 | **건강 분석** | 오행 과·불급에 따른 취약 장기 제시 | `ElementStats`, `Pillars`, `StrengthResult` | 오행-장기 매핑: 木=간/담, 火=심장/소장, 土=비위/위장, 金=폐/대장, 水=신장/방광. 과다 오행 → 항진, 부족 오행 → 허약. 충이 걸린 지지의 오행 부위 주의 | `TopicReport { topic: "건강", vulnerabilities[], advice[] }` | "火가 과다하고 水가 부족 — **심혈관·혈압**에 주의하고, **신장·비뇨기**도 관리가 필요합니다. 충분한 수분 섭취와 차분한 활동(명상, 수영)이 도움됩니다. ⚠️ 의학적 진단을 대체하지 않습니다." | **Adv** |
| D-07 | **이사·이동운** | 역마·화개·지지충 분석으로 이동 시기 제시 | `SpecialStars`, `LuckCycles`, `BranchInteraction` | 역마살 소유자 → 이동 경향 강. 대운·세운에서 역마 지지 만나는 해 = 이사/해외 시기. 충이 발생하는 해 = 환경 변화 | `TopicReport { topic: "이동", moveYears[] }` | "역마살이 년지에 있어 **해외·출장·이직**의 기회가 많습니다. 특히 2028년(寅年) 역마가 활성화되어 거주지 변경 가능성이 높습니다." | **Adv** |
| D-08 | **사업·창업운** | 재성+식상+비겁 분석으로 사업 적합도 판단 | `TenGodStats`, `StrengthResult`, `UsefulGods` | 식상생재 구조(식상→재성 흐름) → 사업 적합. 비겁 多+재성 弱 → 동업 비추. 편재+편관 → 큰 사업. 정재+정관 → 안정 사업 | `TopicReport { topic: "사업", suitability, timing[], warnings[] }` | "식신생재 구조로 **아이디어→수익화 능력**이 있습니다. 다만 비겁이 강해 동업보다 **단독 운영**을 추천. 최적 시기: 35~44세 재성 대운 진입 시." | **Exp** |
| D-09 | **가족·대인관계** | 각 기둥의 육친 배치로 관계 패턴 분석 | `TenGodStats`, `Pillars` | 년주=조부모·사회, 월주=부모·직장, 일주=배우자·자기, 시주=자녀·말년. 각 위치의 십신이 길신인지 흉신인지로 관계 해석 | `TopicReport { topic: "관계", familyMap[] }` | "월주에 편관이 있어 **부모와의 관계가 엄격**했을 수 있습니다. 시주에 식신이 있어 **자녀 복**이 있으며, 말년이 안정적입니다." | **Adv** |

---

## E. 궁합 / 관계 비교 (Compatibility)

| ID | 모듈명 | 목적 | 입력 | 핵심 규칙(요약) | 출력 | 사용자 예시 문구 | 난이도 |
|----|--------|------|------|----------------|------|----------------|--------|
| E-01 | **두 사람 원국 비교** | 오행·십신 상호 비교로 궁합 점수화 | `Pillars` × 2 | ① 일간 오행 상생/상극 관계 ② 양쪽 오행 분포의 보완도 ③ 일지 합(六合·三合) 여부 ④ 충·형·원진 여부 → 가중 점수 | `Compatibility { score, grade, strengths[], conflicts[], advice }` | "궁합 점수: **78/100 (良好)**. 甲木과 己土가 합을 이루어 기본 인연이 강합니다. 다만 일지 巳·亥의 충이 있어 생활 습관 차이에서 갈등 가능." | **Adv** |
| E-02 | **갈등·보완 요인 분석** | 상세 관계 역학 해석 | `Compatibility`, 양쪽 `TenGodStats` | A의 부족 오행을 B가 제공 → 보완. A의 기신을 B가 강화 → 갈등. 서로의 십신에서 역할 분석 (A에게 B는 정재역할 등) | `RelationDynamics { complementary[], conflicting[], roles }` | "상대방의 강한 水 기운이 당신에게 부족한 인성을 보완합니다 — 정서적 안정과 지혜를 줍니다. 그러나 상대의 편관 기운이 압박으로 느껴질 수 있어, 존중의 소통이 핵심." | **Adv** |
| E-03 | **시기 추천** | 두 사람의 합이 강해지는 연도 탐색 | `LuckCycles` × 2, 연도 범위 | 양쪽 대운·세운의 합(天合·地合) 발생 시점, 충 없는 시점 필터링 → 최적 시기 추출 | `TimingAdvice { bestYears[], worstYears[], reasons[] }` | "결혼 최적 시기: **2027년 丁未년** — 양쪽 모두 합의 에너지가 강하고, 충돌 요소가 최소화되는 해입니다." | **Exp** |

---

## F. 작명 / 브랜딩 (선택)

| ID | 모듈명 | 목적 | 입력 | 핵심 규칙(요약) | 출력 | 사용자 예시 문구 | 난이도 |
|----|--------|------|------|----------------|------|----------------|--------|
| F-01 | **오행 보완 글자 추천** | 부족 오행을 보충하는 한글/한자 후보 제시 | `UsefulGods`, 이름 후보 | 용신·희신 오행에 해당하는 한자 부수/획수 필터링. 한글 자음의 오행 매핑(ㄱㅋ=木, ㄴㄷㄹㅌ=火, ㅁㅂㅍ=水, ㅅㅈㅊ=金, ㅇㅎ=土) | `NameSuggestions { element, characters[], scores[] }` | "부족한 水를 보충하려면 이름에 **ㅁ·ㅂ·ㅍ** 계열(한글) 또는 水·氵 부수 한자를 추천합니다. 예: 민(敏), 빈(彬), 현(賢/水 기운)" | **Exp** |
| F-02 | **상호명 점수화** | 사업자의 사주 + 상호 이름의 오행 적합도 점수 | `UsefulGods`, 상호명 텍스트 | 상호명 각 음절의 오행 분석 → 용신/희신 비율 → 종합 점수 | `BrandScore { name, score, elementBreakdown, advice }` | "상호 '블루마린': 水 기운 강 (60%), 용신 水와 일치하여 **적합도 85점**. 사업 방향과 에너지가 잘 맞습니다." | **Exp** |

---

## G. 리포트 엔진 (Report Engine)

| ID | 모듈명 | 목적 | 입력 | 핵심 규칙(요약) | 출력 | 사용자 예시 문구 | 난이도 |
|----|--------|------|------|----------------|------|----------------|--------|
| G-01 | **점수화 엔진** | 모든 분석 결과를 0~100 정규화 점수로 통일 | 각 모듈 출력 | 모듈별 가중치 테이블. 예: 용신 일치 +30, 충 발생 -15, 귀인 존재 +10 등 → min-max 정규화 | `ScoreEngine { module, rawScore, normalizedScore, factors[] }` | (백엔드 전용) | **MVP** |
| G-02 | **템플릿 엔진** | 점수+규칙 → 자연어 해석 문장 생성 | `ScoreEngine` 결과, 템플릿 DB | 조건부 템플릿: `if score >= 80 then "매우 강한 {topic} 기운"` 형태. 변수 삽입: `{element}`, `{tenGod}`, `{year}` 등. 긍정/중립/주의 3단계 톤 | `ReportText { section, paragraphs[], tone }` | "🟢 **재물운 종합 85점**: 편재와 식신의 조합이 탁월하여, 아이디어를 수익으로 전환하는 능력이 뛰어납니다. 43세 이후 본격적 상승." | **MVP** |
| G-03 | **근거 제시 엔진** | "왜 이렇게 판단했는지" 추적 가능한 설명 생성 | 각 모듈의 `factors[]` | 각 점수 기여 요인을 "간지 → 규칙 → 결론" 체인으로 연결하여 텍스트 생성 | `Evidence { conclusion, because[] }` | "💡 근거: ① 월지 午火가 일간 丙火를 돕습니다(득령 +30) ② 년간 甲木이 丙火를 생합니다(득세 +10) ③ 따라서 신강으로 판단합니다(총점 62)" | **Adv** |

---

## H. 예외 처리 (Edge Cases)

| ID | 모듈명 | 목적 | 입력 | 핵심 규칙(요약) | 출력 | 사용자 예시 문구 | 난이도 |
|----|--------|------|------|----------------|------|----------------|--------|
| H-01 | **출생 시간 모름 처리** | 시주 없이 3주(년월일)만으로 분석 + 3가지 시나리오 제시 | `BirthInput` (시간=unknown) | ① 시주 제외 분석 (6글자 기반) ② 가장 가능성 높은 3개 시간대 시뮬레이션(인시·오시·술시) ③ "시간에 따라 달라지는 부분" 명시 | `TimeUnknown { baseAnalysis, scenarios[3], affectedModules[] }` | "출생 시간을 모르시므로 **년·월·일 3주 기반**으로 분석합니다. 참고로 시간에 따라 결과가 다를 수 있는 항목(시주 십신, 12운성 일부)은 3가지 시나리오를 함께 제시합니다." | **MVP** |
| H-02 | **음력↔양력 전환** | 정확한 만세력 기반 음양력 변환 | 음력 날짜 + 윤달 여부 | 만세력 DB(1900~2100년) 조회. 윤달(閏月) 플래그 처리. KST 기준 절기 시각 보정 | `CalendarConversion { inputLunar, outputSolar, isLeapMonth }` | "음력 1981년 7월(윤) 15일 → 양력 **1981년 9월 12일**로 변환하여 분석합니다. (윤7월 적용)" | **MVP** |
| H-03 | **절기 경계 처리** | 월주 결정 시 절기 정확 시각 반영 | 생년월일시, 절기 시각 DB | 예: 2000년 2월 4일 14:42 입춘. 14:42 이전 출생 → 丑월, 이후 → 寅월. 절기 시각 DB 필수 | `SolarTermCheck { term, exactTime, pillarBefore, pillarAfter, applied }` | "출생일이 입춘(立春) 당일입니다. 출생시각 16:00은 입춘 시각(14:42) **이후**이므로 **寅월**로 적용합니다." | **MVP** |
| H-04 | **시간대 보정** | 출생지 경도에 따른 진태양시 보정 | 출생지 좌표 (선택) | 한국 표준시(KST, 135°E 기준)와 출생지 경도 차이 → 4분/1° 보정. 서울(127°E) → 약 -32분 보정 | `TimeZoneAdj { standardTime, trueSolarTime, offset, city }` | "출생지 서울(동경 127°) 기준, 진태양시 보정: 표준시 14:00 → 진태양시 **13:28**. 시주가 달라질 수 있어 보정을 적용합니다." | **Exp** |
| H-05 | **데이터 검증** | 입력 데이터의 유효성 및 논리적 일관성 검증 | `BirthInput` 전체 | ① 날짜 범위 체크(1900~2100) ② 음력 날짜 실존 여부(만세력 대조) ③ 윤달 실제 존재 여부 ④ 미래 날짜 경고 ⑤ 논리적 모순 탐지 | `ValidationResult { isValid, errors[], warnings[] }` | "⚠️ 입력하신 음력 1981년 6월 30일은 존재하지 않는 날짜입니다(음력 6월은 29일까지). 날짜를 확인해주세요." | **MVP** |

---

# 2. 데이터 모델

> TypeScript interface 형태로 정의합니다. Python 구현 시 dataclass/TypedDict로 변환하세요.

```typescript
// ========== 입력 ==========

interface BirthInput {
  year: number;                          // 1900 ~ 2100
  month: number;                         // 1 ~ 12
  day: number;                           // 1 ~ 31
  hour?: number;                         // 0 ~ 23 (undefined = 모름)
  minute?: number;                       // 0 ~ 59
  calendarType: 'solar' | 'lunar';       // 양력 / 음력
  isLeapMonth?: boolean;                 // 윤달 여부 (음력일 때만)
  gender?: 'male' | 'female';           // 대운 순행/역행 결정
  birthPlace?: {                         // 진태양시 보정용
    name: string;
    longitude: number;
    latitude: number;
  };
  name?: string;                         // 작명 분석용
}

// ========== 기본 요소 ==========

type HeavenlyStem = '甲' | '乙' | '丙' | '丁' | '戊' | '己' | '庚' | '辛' | '壬' | '癸';
type EarthlyBranch = '子' | '丑' | '寅' | '卯' | '辰' | '巳' | '午' | '未' | '申' | '酉' | '戌' | '亥';
type FiveElement = '木' | '火' | '土' | '金' | '水';
type YinYang = '陽' | '陰';

type TenGod =
  | '비견' | '겁재'     // 比肩 · 劫財
  | '식신' | '상관'     // 食神 · 傷官
  | '편재' | '정재'     // 偏財 · 正財
  | '편관' | '정관'     // 偏官 · 正官
  | '편인' | '정인';    // 偏印 · 正印

type TwelveStage =
  | '장생' | '목욕' | '관대' | '건록' | '제왕'
  | '쇠' | '병' | '사' | '묘' | '절' | '태' | '양';

// ========== 사주 원국 ==========

interface Pillar {
  stem: HeavenlyStem;
  branch: EarthlyBranch;
  stemElement: FiveElement;
  branchElement: FiveElement;
  stemYinYang: YinYang;
  branchYinYang: YinYang;
  hiddenStems: {
    main: HeavenlyStem;
    middle?: HeavenlyStem;
    residual?: HeavenlyStem;
  };
  tenGod?: TenGod;            // 일간 기준 (일주 자신은 '일간')
  twelveStage?: TwelveStage;  // 일간 기준 12운성
}

interface Pillars {
  year: Pillar;
  month: Pillar;
  day: Pillar;                // day.stem = 일간(日干) = 분석의 중심
  hour: Pillar | null;        // 시간 모를 때 null
  dayStem: HeavenlyStem;      // 편의 참조
}

// ========== 통계 ==========

interface ElementStats {
  wood: number;
  fire: number;
  earth: number;
  metal: number;
  water: number;
  total: number;
  percentages: Record<FiveElement, number>;
  dominant: FiveElement;
  weakest: FiveElement;
  withHiddenStems: boolean;   // 지장간 포함 여부
}

interface YinYangStats {
  yang: number;
  yin: number;
  ratio: string;              // e.g. "5:3"
  dominant: YinYang;
}

interface TenGodStats {
  positions: {
    pillar: 'year' | 'month' | 'day' | 'hour';
    position: 'stem' | 'branch' | 'hidden';
    char: HeavenlyStem | EarthlyBranch;
    tenGod: TenGod;
  }[];
  counts: Record<TenGod, number>;
  dominantGroup: '비겁' | '식상' | '재성' | '관성' | '인성';
}

// ========== 상호작용 ==========

type InteractionType =
  | '천간합' | '천간충'
  | '지지육합' | '지지삼합' | '지지방합'
  | '지지충' | '지지형' | '지지파' | '지지해';

interface Interaction {
  type: InteractionType;
  elements: (HeavenlyStem | EarthlyBranch)[];
  positions: string[];        // e.g. ['년지', '일지']
  result?: FiveElement;       // 합 시 변화 오행
  effect: string;             // 한줄 해석
  severity: 1 | 2 | 3;       // 1=약, 2=중, 3=강
}

// ========== 강약 / 용신 ==========

interface StrengthResult {
  score: number;              // 0 ~ 100
  isStrong: boolean;          // 50 이상 = 신강
  grade: '극신강' | '신강' | '중화' | '신약' | '극신약';
  factors: {
    factor: string;           // e.g. '득령'
    description: string;
    points: number;
  }[];
  isSpecialStructure: boolean; // 종격 등 특수 구조
  specialType?: string;        // e.g. '종아격', '종재격'
}

interface UsefulGods {
  yongShin: FiveElement;      // 용신 (가장 필요한 오행)
  huiShin: FiveElement;       // 희신 (용신을 돕는 오행)
  giShin: FiveElement;        // 기신 (해로운 오행)
  guShin: FiveElement;        // 구신 (기신을 돕는 오행)
  hanShin: FiveElement;       // 한신 (별 영향 없는 오행)
  reasons: string[];
  climateAdj?: {
    needed: FiveElement;
    season: string;
    reason: string;
  };
}

interface Structure {
  type: '정격' | '외격';
  name: string;               // e.g. '정관격', '종아격'
  description: string;
  isSpecial: boolean;
  confidence: number;          // 0 ~ 100
}

// ========== 대운 / 세운 ==========

interface LuckPillar {
  stem: HeavenlyStem;
  branch: EarthlyBranch;
  element: FiveElement;
  tenGod: TenGod;
  startAge: number;
  endAge: number;
  startYear: number;
  endYear: number;
}

interface LuckCycles {
  startAge: number;           // 대운 시작 나이
  direction: '순행' | '역행';
  pillars: LuckPillar[];      // 8~10개
  currentPillar: LuckPillar;  // 현재 대운
}

interface AnnualLuck {
  year: number;
  stem: HeavenlyStem;
  branch: EarthlyBranch;
  tenGodStem: TenGod;
  tenGodBranch: TenGod;
  interactions: Interaction[];
  score: number;              // -50 ~ +50
  summary: string;
  highlights: string[];
}

interface MonthlyLuck {
  year: number;
  month: number;
  stem: HeavenlyStem;
  branch: EarthlyBranch;
  score: number;
  highlights: string[];
}

// ========== 이벤트 마커 ==========

interface EventMarker {
  year: number;
  age: number;
  events: Interaction[];
  severity: 'low' | 'medium' | 'high' | 'critical';
  type: '변곡점' | '호기' | '주의';
  domains: ('직업' | '관계' | '재물' | '건강' | '이동')[];
  description: string;
}

// ========== 주제별 리포트 ==========

interface TopicReport {
  topic: string;              // e.g. '성격', '재물', '건강'
  score: number;              // 0 ~ 100
  grade: 'S' | 'A' | 'B' | 'C' | 'D';
  summary: string;            // 1~2문장 핵심
  details: {
    subtitle: string;
    content: string;
    evidence: string[];       // 근거 목록
  }[];
  advice: string[];           // 조언 목록
  timeline?: {                // 시기별 변화
    period: string;
    description: string;
    score: number;
  }[];
  warnings?: string[];        // 주의사항
}

// ========== 궁합 ==========

interface Compatibility {
  personA: Pillars;
  personB: Pillars;
  overallScore: number;       // 0 ~ 100
  grade: '천생연분' | '좋음' | '보통' | '주의' | '어려움';
  strengths: {
    factor: string;
    description: string;
    score: number;
  }[];
  conflicts: {
    factor: string;
    description: string;
    severity: number;
  }[];
  dynamics: {
    aToB: string;             // A가 B에게 주는 역할
    bToA: string;             // B가 A에게 주는 역할
  };
  advice: string[];
  bestYears?: number[];
}

// ========== 신살 ==========

interface SpecialStar {
  name: string;               // e.g. '천을귀인'
  hanja: string;              // e.g. '天乙貴人'
  category: '귀인' | '도화' | '역마' | '형충' | '공망' | '기타';
  isPositive: boolean;
  sourcePosition: string;     // e.g. '일간 기준'
  targetPosition: string;     // e.g. '월지'
  description: string;
  effect: string;
}

// ========== 최종 리포트 ==========

interface FullReport {
  input: BirthInput;
  pillars: Pillars;
  elementStats: ElementStats;
  yinYangStats: YinYangStats;
  tenGodStats: TenGodStats;
  interactions: Interaction[];
  specialStars: SpecialStar[];
  strength: StrengthResult;
  usefulGods: UsefulGods;
  structure: Structure;
  luckCycles: LuckCycles;
  annualLuck: AnnualLuck[];
  eventMarkers: EventMarker[];
  topics: {
    personality: TopicReport;
    career: TopicReport;
    wealth: TopicReport;
    love: TopicReport;
    health: TopicReport;
    family: TopicReport;
    education?: TopicReport;
    business?: TopicReport;
    moving?: TopicReport;
  };
  compatibility?: Compatibility;
  disclaimer: string;
  generatedAt: string;        // ISO datetime
  version: string;
}
```

---

# 3. MVP 우선순위 & 로드맵

## Phase 1: MVP (2주, 핵심 10개 모듈)

> 목표: "생년월일 입력 → 사주 원국 + 오행 + 기본 해석 + 대운 타임라인" 까지 동작

```
Week 1 — 산출 엔진
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 ☐ H-05  데이터 검증                  ← Day 1
 ☐ H-02  음력↔양력 전환 (만세력 DB)    ← Day 1-2
 ☐ H-03  절기 경계 처리               ← Day 2
 ☐ A-01  사주 원국 산출               ← Day 2-3
 ☐ A-05  지장간 분석                  ← Day 3
 ☐ A-02  오행 분포                    ← Day 3
 ☐ A-03  음양 균형                    ← Day 3
 ☐ A-04  십신 배치                    ← Day 4
 ☐ A-06  12운성                      ← Day 4
 ☐ A-08  천간 합·충                   ← Day 5
 ☐ A-09  지지 충·합·형·파·해          ← Day 5

Week 2 — 강약 + 대운 + 리포트
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 ☐ B-01  신강·신약 판단               ← Day 6-7
 ☐ C-01  대운 산출                    ← Day 7-8
 ☐ H-01  시간모름 처리                ← Day 8
 ☐ D-01  성격·기질 (기본 템플릿)       ← Day 9
 ☐ G-01  점수화 엔진                  ← Day 9
 ☐ G-02  템플릿 엔진                  ← Day 10
 ☐ UI    입력화면 + 결과 요약 + 사주표  ← Day 10-14
```

### MVP 완성 시 사용자 경험:

```
[입력] 생년월일(양/음력), 시간(선택), 성별(선택)
  ↓
[결과 화면 1] 사주 원국표 (4주 8자)
  ↓
[결과 화면 2] 오행 분포 차트 + 음양 비율
  ↓
[결과 화면 3] 십신 배치도 + 12운성
  ↓
[결과 화면 4] 신강/신약 판단 + 해석
  ↓
[결과 화면 5] 대운 타임라인 (10년 주기)
  ↓
[결과 화면 6] 성격 기본 해석
  ↓
[하단] 면책 문구
```

---

## Phase 2: Advanced (4주 추가)

```
Week 3-4 — 용신 + 신살 + 상세 주제
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 ☐ B-02  용신·희신·기신 추정
 ☐ B-03  격국 판별
 ☐ B-04  조후 분석
 ☐ A-07  신살 판별 (40종+)
 ☐ C-02  세운(연운) 분석
 ☐ C-04  변곡점 탐지
 ☐ G-03  근거 제시 엔진

Week 5-6 — 주제별 해석 확장
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 ☐ D-02  학업·시험운
 ☐ D-03  직업·커리어
 ☐ D-04  재물·투자 성향
 ☐ D-05  연애·결혼
 ☐ D-06  건강 분석
 ☐ D-07  이사·이동운
 ☐ D-09  가족·대인관계
 ☐ C-03  월운 반영
 ☐ C-05  대운 전환기
 ☐ E-01  궁합 기본 비교
```

---

## Phase 3: Expert (4주 추가)

```
Week 7-10 — 고급 기능
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 ☐ B-05  통관 분석
 ☐ D-08  사업·창업운
 ☐ E-02  갈등·보완 상세 분석
 ☐ E-03  시기 추천 (결혼/사업)
 ☐ F-01  오행 보완 작명
 ☐ F-02  상호명 점수화
 ☐ H-04  시간대(진태양시) 보정
 ☐ AI    LLM 기반 자연어 해석 통합 (선택)
```

---

## 전체 로드맵 타임라인

```
  2주           6주           10주          지속
  ├─────────────┼─────────────┼─────────────┤
  │   MVP       │  Advanced   │   Expert    │
  │             │             │             │
  │ 원국/오행   │ 용신/격국   │ 통관/작명   │
  │ 십신/12운성 │ 신살(40종)  │ 궁합 심화   │
  │ 신강신약    │ 주제별 해석  │ AI 해석     │
  │ 대운 기본   │ 세운/월운   │ 진태양시    │
  │ 성격 해석   │ 궁합 기본   │ 사업 분석   │
  │ 템플릿 엔진 │ 근거 엔진   │ 상호 점수   │
  └─────────────┴─────────────┴─────────────┘
```

---

# 4. UI / 리포트 설계

## 화면 구성 (5개 화면)

### 화면 1: 입력 화면 (`/input`)

```
┌─────────────────────────────────────────────┐
│  🔮 사주명리 분석                            │
│                                             │
│  ┌─ 기본 정보 ─────────────────────────┐    │
│  │ 생년월일:  [2000] 년 [1] 월 [1] 일  │    │
│  │ 달력:      ○ 양력  ○ 음력 (□ 윤달) │    │
│  │ 출생시간:  [모름 ▾] 또는 [14:30]    │    │
│  │ 성별:      ○ 남  ○ 여  ○ 선택안함  │    │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌─ 추가 옵션 (접힘) ─────────────────┐    │
│  │ 출생지:    [서울특별시 ▾]           │    │
│  │ 이름:      [___________] (선택)     │    │
│  │ 궁합대상:  [추가 입력] (선택)       │    │
│  └────────────────────────────────────┘    │
│                                             │
│          [ 🔍 사주 분석하기 ]               │
│                                             │
│  ⚠️ 이 서비스는 전통 명리학 이론을 기반으로  │
│  한 참고 자료이며, 과학적으로 검증된 것이     │
│  아닙니다.                                   │
└─────────────────────────────────────────────┘
```

**Streamlit 구현 포인트**:
- `st.number_input` × 3 (년/월/일)
- `st.radio` (양력/음력)
- `st.checkbox` (윤달)
- `st.selectbox` 또는 `st.time_input` (시간)
- `st.expander` (추가 옵션)

---

### 화면 2: 결과 요약 (`/summary`)

```
┌─────────────────────────────────────────────┐
│  📊 사주 분석 결과 — 홍길동님                │
│  2000년 1월 15일 (양력) 14:30 남성           │
│                                             │
│  ┌── 사주 원국표 ──────────────────────┐    │
│  │      시주    일주    월주    년주    │    │
│  │  천간  丁      丙      乙      甲    │    │
│  │  지지  卯      寅      丑      辰    │    │
│  │  장간  乙      甲丙戊  癸辛己  戊乙癸│    │
│  │  십신  정인    (일간)  정인    편인   │    │
│  │  12운  목욕    장생    쇠      관대   │    │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 핵심 요약 카드 ──────────────────┐    │
│  │ 🏋️ 신강 (62점)  │ 💎 용신: 水     │    │
│  │ 🐉 용띠         │ 📐 정관격       │    │
│  │ 🌳 木 과다      │ 💧 水 부족      │    │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 오행 분포 ───────────────────────┐    │
│  │ 木 ████████████████░░░░  37%       │    │
│  │ 火 ██████████░░░░░░░░░░  25%       │    │
│  │ 土 █████░░░░░░░░░░░░░░░  12%       │    │
│  │ 金 █████░░░░░░░░░░░░░░░  12%       │    │
│  │ 水 █████░░░░░░░░░░░░░░░  12%       │    │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 성격 한줄 요약 ─────────────────┐     │
│  │ "곧은 소나무처럼 의지가 굳고        │     │
│  │  리더십이 강하며, 창의적 표현력이    │     │
│  │  뛰어난 사람입니다."                │     │
│  └────────────────────────────────────┘    │
│                                             │
│  [📋 상세 분석 보기]  [📅 대운 보기]        │
│  [💑 궁합 분석]       [📥 리포트 다운로드]   │
└─────────────────────────────────────────────┘
```

**Streamlit 구현 포인트**:
- `st.columns(4)` → 4주 메트릭
- `st.bar_chart` 또는 `st.plotly_chart` → 오행 분포
- `st.metric` → 핵심 요약 카드
- `st.dataframe` → 사주표

---

### 화면 3: 상세 분석표 (`/detail`)

```
┌─────────────────────────────────────────────┐
│  📋 상세 분석                               │
│                                             │
│  [탭: 십신 | 12운성 | 신살 | 합충 | 용신]   │
│                                             │
│  ┌── 십신 탭 ─────────────────────────┐    │
│  │                                    │    │
│  │  비겁 ██░░  2개  (독립성)          │    │
│  │  식상 ███░  3개  (창의력) ⭐ 최다  │    │
│  │  재성 █░░░  1개  (재물)            │    │
│  │  관성 █░░░  1개  (사회성)          │    │
│  │  인성 ██░░  2개  (학습력)          │    │
│  │                                    │    │
│  │  💡 식상이 가장 강하여 창의적      │    │
│  │  활동에서 빛을 발합니다.           │    │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 주제별 운세 ─────────────────────┐    │
│  │  💼 직업    ████████░░  80점 A     │    │
│  │  💰 재물    ██████░░░░  60점 B     │    │
│  │  ❤️ 연애    █████████░  85점 A     │    │
│  │  🏥 건강    ██████░░░░  65점 B     │    │
│  │  📚 학업    ████████░░  82점 A     │    │
│  │  🏠 이동    ████░░░░░░  42점 C     │    │
│  │  👪 관계    ███████░░░  72점 B     │    │
│  └────────────────────────────────────┘    │
│                                             │
│  [각 항목 클릭 시 상세 펼침]                │
│                                             │
│  ┌── 직업 상세 (펼침) ────────────────┐    │
│  │  📊 적합 직업군:                   │    │
│  │  1. 교육·연구 (인성+식상 조합)     │    │
│  │  2. 창작·미디어 (식상 강)          │    │
│  │  3. 공직·관리 (정관격)             │    │
│  │                                    │    │
│  │  💡 근거:                          │    │
│  │  - 정관격으로 조직 내 역할 적합     │    │
│  │  - 식상 강: 창의+전달력 우수       │    │
│  │  - 용신 水: 지식 관련 업종 유리     │    │
│  │                                    │    │
│  │  📅 커리어 호기:                   │    │
│  │  - 35~44세: 재성 대운 (수입 상승)  │    │
│  │  - 2028년: 관성 세운 (승진 기회)   │    │
│  └────────────────────────────────────┘    │
└─────────────────────────────────────────────┘
```

**Streamlit 구현 포인트**:
- `st.tabs` → 십신/12운성/신살/합충/용신
- `st.progress` → 주제별 점수 바
- `st.expander` → 상세 펼침

---

### 화면 4: 대운 타임라인 (`/timeline`)

```
┌─────────────────────────────────────────────┐
│  📅 대운 & 세운 타임라인                     │
│                                             │
│  ┌── 대운 흐름 ───────────────────────┐    │
│  │                                    │    │
│  │  3세    13세   23세   33세   43세  │    │
│  │  丙寅    丁卯   戊辰   己巳   庚午 │    │
│  │  (火)   (火)   (土)   (火)   (金)  │    │
│  │   │      │      │    ▲현재   │    │    │
│  │   ●──────●──────●──────●──────●   │    │
│  │                                    │    │
│  │  ★ = 변곡점  ⚡ = 충  ♥ = 합      │    │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 현재 대운 상세 ─────────────────┐    │
│  │  🔵 己巳 대운 (33~42세)            │    │
│  │  "토·화 에너지가 강한 시기.        │    │
│  │   안정을 추구하되 내면의 열정이     │    │
│  │   폭발하는 시기입니다."            │    │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 연도별 세운 ─────────────────────┐   │
│  │  2025 乙巳  ██████████  +35  좋음  │   │
│  │  2026 丙午  ████████░░  +20  보통  │   │
│  │  2027 丁未  ██████████████  +45 ⭐ │   │
│  │  2028 戊申  ████░░░░░░  -10  주의  │   │
│  │  2029 己酉  ██████░░░░  +15  보통  │   │
│  │  2030 庚戌  ██░░░░░░░░  -25 ⚡변곡 │   │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 변곡점 알림 ─────────────────────┐   │
│  │  ⚡ 2030년(38세): 다중 충돌 감지    │   │
│  │  ⚡ 2038년(46세): 대운 전환기       │   │
│  │  ★ 2027년(35세): 다중 합 (호기)    │   │
│  └────────────────────────────────────┘    │
└─────────────────────────────────────────────┘
```

**Streamlit 구현 포인트**:
- `st.plotly_chart` → 타임라인 그래프
- `st.slider` → 연도 범위 선택
- `st.columns` + `st.metric` → 연도별 점수
- 색상 코딩: 양수=파랑, 음수=빨강, 변곡점=노랑

---

### 화면 5: 궁합 비교 (`/compatibility`)

```
┌─────────────────────────────────────────────┐
│  💑 궁합 분석                               │
│                                             │
│  ┌── 두 사람 비교 ───────────────────┐     │
│  │                                    │     │
│  │    A: 甲辰 乙丑 丙寅 丁卯          │     │
│  │              VS                    │     │
│  │    B: 庚戌 辛亥 壬子 癸丑          │     │
│  │                                    │     │
│  │       궁합 점수: 78/100            │     │
│  │          ████████░░                │     │
│  │         등급: 💚 좋음              │     │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 보완 요인 ──────────────────────┐    │
│  │ ✅ 甲己合 (일간 합)  → 깊은 인연   │    │
│  │ ✅ 오행 상호보완 (A:木↔B:金水)     │    │
│  │ ✅ A의 부족한 水를 B가 보충         │    │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 갈등 요인 ──────────────────────┐    │
│  │ ⚠️ 寅申충 (일지-년지)  → 생활 차이 │    │
│  │ ⚠️ 양기 과다 (활동 스타일 충돌)    │    │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 관계 역학 ──────────────────────┐    │
│  │ A→B: "보호자·지원자 역할"          │    │
│  │ B→A: "안정·현실감각 제공"          │    │
│  └────────────────────────────────────┘    │
│                                             │
│  ┌── 추천 시기 ──────────────────────┐    │
│  │ 💍 결혼: 2027년 丁未년 (양쪽 합↑)  │    │
│  │ ⛔ 주의: 2030년 庚戌년 (충 다수)   │    │
│  └────────────────────────────────────┘    │
└─────────────────────────────────────────────┘
```

---

## 리포트 출력 구조

모든 결과 화면은 다음 4-layer 구조를 따릅니다:

```
Layer 1: 요약 (Summary)
├─ 핵심 키워드 3~5개
├─ 종합 점수 / 등급
└─ 한줄 해석

Layer 2: 상세 (Detail)
├─ 표 / 그래프 (데이터 시각화)
├─ 카테고리별 분석 텍스트
└─ 시기별 변화 (해당 시)

Layer 3: 근거 (Evidence)
├─ "왜 이렇게 판단했는지" 목록
├─ 간지 → 규칙 → 결론 체인
└─ 참고 이론 (접힘)

Layer 4: 주의/면책 (Disclaimer)
├─ 과학적 한계 안내
├─ 전문 상담 권유
└─ 의료/법률/투자 면책
```

---

# 5. 면책 / 윤리 문구

## 필수 면책 문구 (모든 리포트 하단)

```
⚠️ 이용 안내 및 면책 사항

본 분석은 전통 동양 명리학(사주팔자) 이론을 기반으로 한 참고 자료이며,
과학적으로 검증된 예측이 아닙니다.

1. [과학적 한계]
   사주명리학은 전통 철학 체계로, 현대 과학의 검증 기준을 충족하지 않습니다.
   분석 결과는 통계적 예측이 아니라 전통 이론의 해석입니다.

2. [의사결정 책임]
   이 분석을 근거로 한 어떠한 의사결정(직업, 투자, 관계, 이사 등)에 대한
   책임은 전적으로 사용자 본인에게 있습니다.

3. [건강 관련]
   건강 분석은 오행 이론에 기반한 일반적 경향 제시이며, 의학적 진단·처방·
   치료를 대체할 수 없습니다. 건강 문제가 있다면 반드시 의료 전문가와
   상담하세요.

4. [법률·투자 관련]
   재물·사업 분석은 투자 조언이 아닙니다.
   법률적 판단이 필요한 사안은 전문 법률가와 상담하세요.

5. [심리적 의존 주의]
   사주 분석에 과도하게 의존하지 마세요.
   당신의 선택과 노력이 운명을 만들어갑니다.
   심리적 어려움이 있다면 전문 상담사의 도움을 받으세요.

6. [데이터 처리]
   입력된 생년월일 정보는 분석 목적으로만 사용되며,
   서버에 영구 저장되지 않습니다.

© 2026 사주분석 앱. 모든 해석은 전통 명리학 이론에 기반하며,
개인의 자유의지와 노력이 가장 중요합니다.
```

## 주제별 추가 면책

| 주제 | 추가 면책 문구 |
|------|---------------|
| **건강** | "이 분석은 의학적 진단이 아닙니다. 증상이 있다면 반드시 의사와 상담하세요." |
| **재물/투자** | "투자 조언이 아닙니다. 투자 결정은 전문 재무상담사와 함께하세요." |
| **연애/결혼** | "궁합은 참고 자료일 뿐, 실제 관계는 상호 존중과 소통으로 만들어갑니다." |
| **사업** | "사업 성공은 시장 조사, 역량, 노력에 달려있습니다. 사주는 보조 참고일 뿐입니다." |
| **시험운** | "합격 여부는 본인의 학습량과 실력이 결정합니다." |

---

# 부록: 핵심 데이터 테이블 목록

구현 시 다음 참조 테이블이 필요합니다:

```
📂 data/
├── manseryeok.json          # 만세력 DB (1900~2100, 음양력 변환)
├── solar_terms.json         # 24절기 정확 시각표
├── heavenly_stems.json      # 천간 정보 (오행, 음양)
├── earthly_branches.json    # 지지 정보 (오행, 음양, 동물띠)
├── hidden_stems.json        # 지장간 테이블 (본기/중기/여기)
├── ten_gods_map.json        # 일간×대상 → 십신 매핑
├── twelve_stages.json       # 일간×지지 → 12운성 매핑
├── special_stars.json       # 신살 규칙 테이블 (40~80종)
├── stem_interactions.json   # 천간 합/충 규칙
├── branch_interactions.json # 지지 충/합/형/파/해 규칙
├── strength_rules.json      # 신강신약 점수 규칙
├── useful_gods_map.json     # 격국별 용신 추정 규칙
├── climate_adj.json         # 조후 테이블 (일간×월지)
├── career_map.json          # 격국/용신 → 직업 매핑
├── health_map.json          # 오행 → 장기/질병 매핑
├── phrase_templates.json    # 해석 문구 템플릿 (수백 개)
├── hanja_elements.json      # 한자 부수별 오행 매핑 (작명용)
└── hangul_elements.json     # 한글 초성 오행 매핑 (작명용)
```

---

**문서 끝**

| 항목 | 내용 |
|------|------|
| 총 모듈 수 | 38개 (A:9, B:5, C:5, D:9, E:3, F:2, G:3, H:5) |
| MVP 모듈 | 17개 (2주) |
| Advanced 모듈 | 15개 (+4주) |
| Expert 모듈 | 6개 (+4주) |
| 데이터 모델 | 20+ TypeScript interfaces |
| UI 화면 | 5개 (입력/요약/상세/타임라인/궁합) |
| 참조 테이블 | 17개 JSON 파일 |
